**Creating a Media Manager Application**
**创建多媒体管理器APP**

2018-01-15v4.4.1 4.4.1Github

If you come across any mistakes or bugs in this tutorial, please let us know using a Github issue, a post on the DJI forum. Please feel free to send us Github pull request and help us fix any issues.
如果您在本教程中遇到任何错误或BUG, 请使用 Github 让我们知道或者 DJI 论坛上的一个帖子。请随时发送 Github 请求, 并帮助我们解决任何问题。

In this tutorial, you will learn how to use the MediaManager to interact with the file system on the SD card of the aircraft's camera. By the end of this tutorial, you will have an app that you can use to preview photos, play videos, download or delete files and so on.
在本教程中, 您将学习如何使用 MediaManager 与无人机摄像头的 SD 卡上的文件系统进行交互。 在本教程结束时, 你将有一个APP可以用来预览照片, 播放视频, 下载或者删除文件等等。

In order for our app to manage photos and videos, however, it must first be able to take and record them. Fortunately, by using DJI Android UI Library, you can implement shooting photos and recording videos functionalities easily with standard DJI Go UIs.
然而, 为了让APP管理照片和视频, 它必须首先能够采取并记录它们。 幸运的是, 通过使用 DJI Android UI 库, 您可以使用标准 DJI Go UIs 实现拍摄照片和录制视频功能。

You can download the tutorial's final sample project from this Github Page.
您可以从这个 Github 页面下载教程的最终示例项目。

We use Mavic Pro and Nexus 5 as an example to make this demo. For more details of customizing the layouts for iPhone devices, please check the tutorial's Github Sample Project.
我们使用 Mavic Pro 和 Nexus 5作为示例来做这个演示。 如果想了解更多关于 iPhone 设备布局定制的详细信息, 请查看教程的 Github 示例项目。

**Application Activation and Aircraft Binding in China**
**中国APP激活与无人机绑定**

For DJI SDK mobile application used in China, it's required to activate the application and bind the aircraft to the user's DJI account.
对于中国使用的 DJI SDK APP, 需要激活APP并将无人机绑定到用户的 DJI 帐户。

If an application is not activated, the aircraft not bound (if required), or a legacy version of the SDK (< 4.1) is being used, all camera live streams will be disabled, and flight will be limited to a zone of 100m diameter and 30m height to ensure the aircraft stays within line of sight.
如果一个APP没有被激活, 无人机不受管制(如果需要) , 或 SDK (4.1)的历史版本, 所有摄像头实时流都将被禁用, 飞行范围将限制在100米直径和30米高度范围内, 以确保无人机保持在视线范围内。

To learn how to implement this feature, please check this tutorial Application Activation and Aircraft Binding.
要学习如何实现这一特性, 请检查本教程APP激活和无人机绑定。

**Importing UI Library Maven Dependency**
**导入 UI 库 Maven 依赖项**

Now, create a new project in Android Studio, open Android Studio and select File -> New -> New Project to create a new project, named 'MediaManagerDemo'. Enter the company domain and package name (Here we use "com.dji.mediaManagerDemo") you want and press Next. Set the minimum SDK version as API 19: Android 4.4 (KitKat) for "Phone and Tablet" and press Next. Then select "Empty Activity" and press Next. Lastly, leave the Activity Name as "MainActivity", and the Layout Name as "activity_main", press "Finish" to create the project.
现在, 在 Android Studio 中创建一个新项目, 打开Android Studio, 选择File-New-New Project来创建一个新项目, 名为"MediaManagerDemo"。 输入您想要的公司域名和包名(这里我们使用"com.dji.mediaManagerDemo")并按下一步。 将最小 SDK 版本设置为 API 19: Android 4.4(KitKat)的"手机和平板电脑", 然后按下一步。 然后选择"Empty Activity"并按下一步。 最后, 将activity name 设置为"MainActivity", 并将layout name设置为"activity_main", 按"完成"来创建项目。

Please check the Getting Started with UI Library tutorial to learned how to import the DJI Android UI Library Maven Dependency to your project. If you haven't read that previously, please take a look at it and implement the related features. Once you've done that, continue to implement the next features.
使用 UI 库教程请查看 Getting Started, 学习如何导入 DJI Android UI Library Maven 依赖项目。 如果您以前没有读过该教程, 请看一看并且实现相关的功能。 一旦这样做了, 继续实现下一个功能。

**Implementing the UI of Application**
**实现APP界面**

**Building the Default Layout using UI Library**
**使用 UI 库构建默认布局**

Now, create a new Empty Activity class with the name of "DefaultLayoutActivity" in the com.dji.mediaManagerDemo package. Replace the code with the following, remember to import the related classes as Android Studio suggested:
现在, 在 com.dji.mediaManagerDemo 包中创建一个名为"DefaultLayoutActivity"的新的空活动类。 用下面的代码替换代码, 记住按照 Android Studio 的建议导入相关的类:
~~~
public class DefaultLayoutActivity extends AppCompatActivity implements View.OnClickListener{
    private Button mMediaManagerBtn;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_default_layout);
        mMediaManagerBtn = (Button)findViewById(R.id.btn_mediaManager);
        mMediaManagerBtn.setOnClickListener(this);
    }
    @Override
    public void onClick(View v) {
        switch (v.getId()) {
            case R.id.btn_mediaManager: {
                Intent intent = new Intent(this, MainActivity.class);
                startActivity(intent);
                break;
            }
            default:
                break;
        }
    }
}
~~~
In the code above, we create a Button variable mMediaManagerBtn and initialize it in the onCreate() method. Moreover, implement the onClick() method of the Button and invoke startActivity() method to start the MainActivity.
在上面的代码中, 我们创建一个 Button 变量 mMediaManagerBtn, 并在 onCreate ()方法中初始化它。 此外, 实现按钮的 onClick 方法和调用 startActivity 方法来启动 MainActivity。

Next, continue to open the "activity_default_layout.xml" file, and replace the code with the following:
接下来, 继续打开"activity default layout.xml"文件, 并用以下代码替换代码:
~~~
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    xmlns:custom="http://schemas.android.com/apk/res-auto"
    android:id="@+id/activity_main"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/background_blue"
    android:orientation="horizontal"
    tools:context=".MainActivity">
    <!-- Widget to see first person view (FPV) -->
    <dji.ui.widget.FPVWidget
        android:layout_width="match_parent"
        android:layout_height="match_parent"/>
    <dji.ui.widget.FPVOverlayWidget
        android:layout_width="match_parent"
        android:layout_height="match_parent"/>
    <!-- Widgets in top status bar -->
    <LinearLayout
        android:id="@+id/signal"
        android:layout_width="match_parent"
        android:layout_height="25dp"
        android:background="@color/dark_gray"
        android:orientation="horizontal">
        <dji.ui.widget.PreFlightStatusWidget
            android:id="@+id/status"
            android:layout_width="238dp"
            android:layout_height="25dp"/>
        <dji.ui.widget.FlightModeWidget
            android:layout_width="103dp"
            android:layout_height="22dp"/>
        <dji.ui.widget.GPSSignalWidget
            android:layout_width="44dp"
            android:layout_height="22dp"/>
        <dji.ui.widget.VisionWidget
            android:layout_width="22dp"
            android:layout_height="22dp"/>
        <dji.ui.widget.RemoteControlSignalWidget
            android:layout_width="38dp"
            android:layout_height="22dp"/>
        <dji.ui.widget.VideoSignalWidget
            android:layout_width="38dp"
            android:layout_height="22dp"/>
        <dji.ui.widget.WiFiSignalWidget
            android:layout_width="32dp"
            android:layout_height="25dp"/>
        <dji.ui.widget.BatteryWidget
            android:layout_width="96dp"
            android:layout_height="22dp"
            custom:excludeView="singleVoltage"/>
        <dji.ui.widget.ConnectionWidget
            android:layout_marginTop="3dp"
            android:layout_width="18dp"
            android:layout_height="18dp"/>
    </LinearLayout>
    <LinearLayout
        android:id="@+id/camera"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/signal"
        android:layout_centerHorizontal="true"
        android:layout_margin="12dp"
        android:background="@color/dark_gray"
        android:orientation="horizontal">
        <dji.ui.widget.AutoExposureLockWidget
            android:layout_width="25dp"
            android:layout_height="25dp"/>
        <dji.ui.widget.FocusExposureSwitchWidget
            android:layout_width="25dp"
            android:layout_height="25dp"/>
        <dji.ui.widget.FocusModeWidget
            android:layout_width="25dp"
            android:layout_height="25dp"/>
        <dji.ui.widget.config.CameraConfigISOWidget
            android:layout_width="50dp"
            android:layout_height="25dp"/>
        <dji.ui.widget.config.CameraConfigShutterWidget
            android:layout_width="50dp"
            android:layout_height="25dp"/>
        <dji.ui.widget.config.CameraConfigApertureWidget
            android:layout_width="50dp"
            android:layout_height="25dp"/>
        <dji.ui.widget.config.CameraConfigEVWidget
            android:layout_width="50dp"
            android:layout_height="25dp"/>
        <dji.ui.widget.config.CameraConfigWBWidget
            android:layout_width="50dp"
            android:layout_height="25dp"/>
        <dji.ui.widget.CameraConfigStorageWidget
            android:layout_width="108dp"
            android:layout_height="25dp"/>
    </LinearLayout>
    <dji.ui.widget.RemainingFlightTimeWidget
        android:layout_alignParentTop="true"
        android:layout_marginTop="18dp"
        android:layout_width="match_parent"
        android:background="@color/transparent"
        android:layout_height="20dp"/>
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:orientation="horizontal"
        android:padding="12dp">
        <dji.ui.widget.dashboard.DashboardWidget
            android:id="@+id/Compass"
            android:layout_width="405dp"
            android:layout_height="91dp"
            android:layout_marginRight="12dp"/>
    </LinearLayout>
    <!--Take off and return home buttons on left -->
    <LinearLayout
        android:layout_width="40dp"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_marginStart="12dp"
        android:orientation="vertical">
        <dji.ui.widget.TakeOffWidget
            android:layout_width="40dp"
            android:layout_height="40dp"
            android:layout_marginBottom="12dp"/>
        <dji.ui.widget.ReturnHomeWidget
            android:layout_width="40dp"
            android:layout_height="40dp"
            android:layout_marginTop="12dp"/>
    </LinearLayout>
    <dji.ui.widget.controls.CameraControlsWidget
        android:id="@+id/CameraCapturePanel"
        android:layout_width="50dp"
        android:layout_height="213dp"
        android:layout_alignParentRight="true"
        android:layout_below="@id/camera" />
    <dji.ui.panel.CameraSettingExposurePanel
        android:id="@+id/CameraExposureMode"
        android:layout_width="180dp"
        android:layout_height="263dp"
        android:layout_below="@id/camera"
        android:layout_marginLeft="360dp"
        android:layout_toLeftOf="@+id/CameraCapturePanel"
        android:background="@color/transparent"
        android:gravity="center"
        android:visibility="invisible" />
    <dji.ui.panel.CameraSettingAdvancedPanel
        android:id="@+id/CameraAdvancedSetting"
        android:layout_width="180dp"
        android:layout_height="263dp"
        android:layout_below="@id/camera"
        android:layout_marginLeft="360dp"
        android:layout_toLeftOf="@+id/CameraCapturePanel"
        android:background="@color/transparent"
        android:gravity="center"
        android:visibility="invisible" />
    <Button
        android:id="@+id/btn_mediaManager"
        android:layout_width="38dp"
        android:layout_height="30dp"
        android:layout_alignStart="@+id/CameraCapturePanel"
        android:layout_below="@id/CameraCapturePanel"
        android:background="@drawable/playback"
        android:visibility="visible" />
    <!-- Pre-flight checklist panel -->
    <dji.ui.panel.PreFlightCheckListPanel
        android:id="@+id/PreflightCheckView"
        android:layout_width="400dp"
        android:layout_height="wrap_content"
        android:layout_below="@id/signal"
        android:visibility="gone"/>
</RelativeLayout>
~~~
In the xml file above, we implement the UI Library's default layout. For more details, please check the Getting Started with UI Library tutorial.
在上面的 xml 文件中, 我们实现了 UI 库的默认布局。 更多的细节, 请查看 UI 库教程。

Once you finished the steps above, open the "color.xml" file and replace the content with the following:
一旦完成上面的步骤, 打开"color.xml"文件, 用下面的内容替换内容:
~~~
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="colorPrimary">#3F51B5</color>
    <color name="colorPrimaryDark">#303F9F</color>
    <color name="colorAccent">#FF4081</color>
    <color name="black_overlay">#000000</color>
    <color name="colorWhite">#FFFFFF</color>
    <color name="background_blue">#242d34</color>
    <color name="transparent">#00000000</color>
    <color name="dark_gray">#80000000</color>
</resources>
~~~
Moreover, open the "styles.xml" file and replace the content with the following:
此外, 打开"styles.xml"文件, 并以下列方式替换内容:
~~~
<resources>
    <!-- Base application theme. -->
    <style name="AppTheme" parent="@style/Base.Theme.AppCompat.Light.NoActionBar">
    </style>
</resources>
~~~
**Working on the MainActivity Layout**
**正在进行 MainActivity 布局**

Once you finished the steps above, let's open the "activity_main.xml" file, and replace the content with the following:
一旦完成上面的步骤, 让我们打开"activity main.xml"文件, 并用下面的内容替换:
~~~
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context="com.dji.mediaManagerDemo.MainActivity">
    <Button
        android:id="@+id/back_btn"
        android:layout_width="60dp"
        android:layout_height="40dp"
        android:layout_alignParentStart="true"
        android:layout_alignParentTop="true"
        android:text="Back"
        android:textSize="11sp" />
    <Button
        android:id="@+id/delete_btn"
        android:layout_width="65dp"
        android:layout_height="40dp"
        android:layout_alignParentTop="true"
        android:layout_toEndOf="@+id/back_btn"
        android:text="Delete"
        android:textSize="11sp" />
    <Button
        android:id="@+id/reload_btn"
        android:layout_width="70dp"
        android:layout_height="40dp"
        android:layout_alignParentTop="true"
        android:layout_toEndOf="@+id/delete_btn"
        android:text="Reload"
        android:textSize="11sp" />
    <Button
        android:id="@+id/download_btn"
        android:layout_width="90dp"
        android:layout_height="40dp"
        android:layout_alignParentTop="true"
        android:layout_toEndOf="@+id/reload_btn"
        android:text="Download"
        android:textSize="11sp" />
    <Button
        android:id="@+id/status_btn"
        android:layout_width="75dp"
        android:layout_height="40dp"
        android:layout_alignParentTop="true"
        android:layout_toEndOf="@+id/download_btn"
        android:text="Status"
        android:textSize="11sp" />
    <Button
        android:id="@+id/play_btn"
        android:layout_width="60dp"
        android:layout_height="40dp"
        android:layout_alignParentStart="true"
        android:layout_below="@+id/back_btn"
        android:text="Play"
        android:textSize="11sp" />
    <Button
        android:id="@+id/resume_btn"
        android:layout_width="80dp"
        android:layout_height="40dp"
        android:layout_below="@+id/back_btn"
        android:layout_toEndOf="@+id/play_btn"
        android:text="Resume"
        android:textSize="11sp" />
    <Button
        android:id="@+id/pause_btn"
        android:layout_width="60dp"
        android:layout_height="40dp"
        android:layout_below="@+id/reload_btn"
        android:layout_toEndOf="@+id/resume_btn"
        android:text="Pause"
        android:textSize="11sp" />
    <Button
        android:id="@+id/stop_btn"
        android:layout_width="60dp"
        android:layout_height="40dp"
        android:layout_below="@+id/reload_btn"
        android:layout_toEndOf="@+id/pause_btn"
        android:text="Stop"
        android:textSize="11sp" />
    <Button
        android:id="@+id/moveTo_btn"
        android:layout_width="75dp"
        android:layout_height="40dp"
        android:layout_below="@+id/reload_btn"
        android:layout_toEndOf="@+id/stop_btn"
        android:text="MoveTo"
        android:textSize="11sp" />
    <!-- Widget to see first person view (FPV) -->
    <dji.ui.widget.FPVWidget
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_below="@+id/play_btn"
        android:layout_toStartOf="@+id/pointing_drawer_sd"
        android:id="@+id/FPVWidget" />
    <ImageView
        android:id="@+id/imageView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_below="@+id/play_btn"
        android:layout_marginTop="0dp"
        android:layout_toStartOf="@+id/pointing_drawer_sd"
        android:background="@color/black_overlay"
        android:visibility="invisible" />
    <android.support.v7.widget.RecyclerView
        android:id="@+id/filelistView"
        android:layout_width="250dp"
        android:layout_height="match_parent"
        android:layout_marginLeft="0dp"
        android:layout_toEndOf="@+id/FPVWidget" />
    <SlidingDrawer
        android:id="@+id/pointing_drawer_sd"
        android:layout_width="230dp"
        android:layout_height="match_parent"
        android:layout_alignParentRight="true"
        android:content="@+id/pointing_drawer_content"
        android:handle="@+id/pointing_handle"
        android:orientation="horizontal">
        <ImageView
            android:id="@id/pointing_handle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
        <RelativeLayout
            android:id="@+id/pointing_drawer_content"
            android:layout_width="250dp"
            android:layout_height="match_parent"
            android:layout_centerVertical="true"
            android:layout_marginLeft="340dp"
            android:background="@color/black_overlay">
            <ScrollView
                android:layout_width="250dp"
                android:layout_height="fill_parent"
                android:layout_alignParentEnd="true"
                android:layout_alignParentRight="true"
                android:layout_centerVertical="true"
                android:clickable="false"
                android:scrollbars="vertical">
                <TextView
                    android:id="@+id/pointing_push_tv"
                    style="@style/status_text"
                    android:layout_width="200dp"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="30dp"
                    android:scrollbars="vertical"
                    android:text="@string/push_info" />
            </ScrollView>
        </RelativeLayout>
    </SlidingDrawer>
</RelativeLayout>
~~~
In the xml above, we define the following UI elements:
在上面的 xml 中, 我们定义了以下 UI 元素:

  1.Create 10 Buttons with the names of "BACK", "DELETE", "RELOAD", "DOWNLOAD", "STATUS", "PLAY", "RESUME", "PAUSE", "STOP" and "MOVETO" on the upper left corner.
  1.创建“返回”，“删除”，“刷新”，“下载”，“状态”，“播放”，“恢复”，“暂停”，“停止”和“跳转到”共10 个按钮。
  
  2.Create a FPVWidget widget below the Buttons to show the live camera video stream.
  2.在按钮下方创建一个FPVWidget小工具，以显示实时摄像头视频流。
 
  3.Create an ImageView to show the downloaded photo and overlay it over the FPVWidget.
  3.创建一个ImageView来显示下载的照片并覆盖在FPVWidget上。
 
  4.Create a RecyclerView on the right side to show the info of media files list.
  4.在右侧创建一个RecyclerView以显示多媒体文件列表的信息。
  
  5.Lastly, create a ScrollView with a TextView to show the video playback state info.
  5.最后，使用TextView创建一个ScrollView来显示视频播放状态信息。

Here is a screenshot of the implemented UI of MainActivity:
下面是 MainActivity 实现的用户界面的截图:
![](https://devcn.djicdn.com/images/tutorials-and-samples/Android/MediaManagerDemo/mainActivity_UI-256851ee68.png)
mainActivity_UI

**Initializing the UI Elements in MainActivity**
**初始化 MainActivity 中的 UI 元素**

Once you finished the steps above, let's open the "MainActivity.java" file and replace the code with the following:
当您完成上面的步骤后, 让我们打开"MainActivity.java"文件, 用下面的代码替换代码:
~~~
public class MainActivity extends Activity implements View.OnClickListener {
    private static final String TAG = MainActivity.class.getName();
    private static MainActivity activity;
    private Button mBackBtn, mDeleteBtn, mReloadBtn, mDownloadBtn, mStatusBtn;
    private Button mPlayBtn, mResumeBtn, mPauseBtn, mStopBtn, mMoveToBtn;
    private RecyclerView listView;
    private SlidingDrawer mPushDrawerSd;
    private ImageView mDisplayImageView;
    private TextView mPushTv;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        initUI();
    }
    @Override
    protected void onResume() {
        super.onResume();
    }
    @Override
    protected void onPause() {
        super.onPause();
    }
    @Override
    protected void onStop() {
        super.onStop();
    }
    @Override
    protected void onDestroy() {    
        super.onDestroy();
    }
    void initUI() {
        //Init RecyclerView
        listView = (RecyclerView) findViewById(R.id.filelistView);
        LinearLayoutManager layoutManager = new LinearLayoutManager(MainActivity.this, OrientationHelper.VERTICAL,false);
        listView.setLayoutManager(layoutManager);
        mPushDrawerSd = (SlidingDrawer)findViewById(R.id.pointing_drawer_sd);
        mPushTv = (TextView)findViewById(R.id.pointing_push_tv);
        mBackBtn = (Button) findViewById(R.id.back_btn);
        mDeleteBtn = (Button) findViewById(R.id.delete_btn);
        mDownloadBtn = (Button) findViewById(R.id.download_btn);
        mReloadBtn = (Button) findViewById(R.id.reload_btn);
        mStatusBtn = (Button) findViewById(R.id.status_btn);
        mPlayBtn = (Button) findViewById(R.id.play_btn);
        mResumeBtn = (Button) findViewById(R.id.resume_btn);
        mPauseBtn = (Button) findViewById(R.id.pause_btn);
        mStopBtn = (Button) findViewById(R.id.stop_btn);
        mMoveToBtn = (Button) findViewById(R.id.moveTo_btn);
        mDisplayImageView = (ImageView) findViewById(R.id.imageView);
        mDisplayImageView.setVisibility(View.VISIBLE);
        mBackBtn.setOnClickListener(this);
        mDeleteBtn.setOnClickListener(this);
        mDownloadBtn.setOnClickListener(this);
        mReloadBtn.setOnClickListener(this);
        mDownloadBtn.setOnClickListener(this);
        mStatusBtn.setOnClickListener(this);
        mPlayBtn.setOnClickListener(this);
        mResumeBtn.setOnClickListener(this);
        mPauseBtn.setOnClickListener(this);
        mStopBtn.setOnClickListener(this);
        mMoveToBtn.setOnClickListener(this);
    }
    @Override
    public void onClick(View v) {
        switch (v.getId()) {
            case R.id.back_btn: {
                break;
            }
            case R.id.delete_btn:{
                break;
            }
            case R.id.reload_btn: {
                break;
            }
            case R.id.download_btn: {
                break;
            }
            case R.id.status_btn: {
                break;
            }
            case R.id.play_btn: {
                break;
            }
            case R.id.resume_btn: {
                break;
            }
            case R.id.pause_btn: {
                break;
            }
            case R.id.stop_btn: {
                break;
            }
            case R.id.moveTo_btn: {
                break;
            }
            default:
                break;
        }
    }
}
~~~

In the code above, we implement the following:
在上面的代码中, 我们实现了以下内容:

  1.Create variables for Button, RecyclerView, SlidingDrawer, ImageView and TextView.
  1.为Button，RecyclerView，SlidingDrawer，ImageView和TextView创建变量。

  2.Next, create an initUI() method to initialize the UI elements and invoke the setOnClickListener method of Buttons to set MainActivity as the listener. Then invoke the initUI() method in the onCreate() method.
  2.接下来，创建一个initUI()方法去初始化UI元素然后调用按钮的setOnClickListener方法作为监听器。然后在onCreate()方法中调用initUI()方法。

  3.Lastly, implement the onClick() method for all the Buttons.
  3.最后，实现所有按钮的onClick()方法。


**Registering the Application**
**登记申请**

After you finish the above steps, let's register our application with the App Key you apply from DJI Developer Website. If you are not familiar with the App Key, please check the Get Started.
完成上述步骤后, 使用APP KEY来注册我们的APP。 如果您不知道APP KEY, 请检查 Get Started。

Moreover, please check the Creating an Camera Application tutorial and the sample project of this tutorial for the detailed implementations of the MApplication, DemoApplication and ConnectionActivity
此外, 请检查 创建摄像头APP教程和本教程的示例项目, 以详细实现 MApplication, DemoApplication 和 ConnectionActivity

Now let's build and run the project and install it to your Android device. If everything goes well, you should see the "Register Success" textView like the following screenshot when you register the app successfully.
现在, 让我们建立并运行这个项目并把它安装到你的 Android 设备上。 如果一切顺利, 当你成功注册APP时, 你应该会看到"注册成功"文本, 就像下面的截图一样。
![](https://devcn.djicdn.com/images/tutorials-and-samples/Android/MediaManagerDemo/registerSuccess-aebf4848a0.png)

**Refreshing Media File List**
**刷新多媒体文件列表**

**Initializing MediaManager**
**初始化 MediaManager**

Now, continue to work on the "MainActivity.java" file. Firstly, add the following codes at the beginning of the MainActivity class:
现在, 继续修改"MainActivity.java"文件。 首先, 在 MainActivity 类的开头添加以下代码:
~~~
private FileListAdapter mListAdapter;
private List<MediaFile> mediaFileList = new ArrayList<MediaFile>();
private MediaManager mMediaManager;
private MediaManager.FileListState currentFileListState = MediaManager.FileListState.UNKNOWN;
private ProgressDialog mLoadingDialog;
private FetchMediaTaskScheduler scheduler;
private int lastClickViewIndex =-1;
private View lastClickView;
~~~

In the code above, we create variables for the FileListAdapter, List<MediaFile>, MediaManager, FetchMediaTaskScheduler and so on.
在上面的代码中, 我们为 FileListAdapter、 listmediafile、 MediaManager、 FetchMediaTaskScheduler 等等创建变量。

Next, improve the onDestroy() method with the following:
接下来, 改进 onDestroy ()方法, 如下所示:
~~~
@Override
protected void onDestroy() {
    lastClickView = null;
    DemoApplication.getCameraInstance().setMode(SettingsDefinitions.CameraMode.SHOOT_PHOTO, new CommonCallbacks.CompletionCallback() {
            @Override
            public void onResult(DJIError mError) {
              if (mError != null){
                  setResultToToast("Set Shoot Photo Mode Failed" + mError.getDescription());
              }
            }
    });
    if (mediaFileList != null) {
        mediaFileList.clear();
    }
    super.onDestroy();
}
~~~

Here, we implement the following:
在这里, 我们实现以下几点:

  1.Invoke the setMode() method of Camera and set camera mode as SHOOT_PHOTO mode and show toast if there is any error in the completion callback.
  1.调用摄像头模式的setMode()方法Camera并将其设置为SHOOT_PHOTO模式，并显示完成回调中是否有任何错误。

  2.Then invoke the clear() method of List<MediaFile> to reset the mediaFileList.
  2.然后调用List<MediaFile>的clear()方法去重置mediaFileList


Moveover, add the following code in the initUI() method:
在 initUI ()方法中添加以下代码:
~~~
//Init FileListAdapter
mListAdapter = new FileListAdapter();
listView.setAdapter(mListAdapter);
//Init Loading Dialog
mLoadingDialog = new ProgressDialog(MainActivity.this);
mLoadingDialog.setMessage("Please wait");
mLoadingDialog.setCanceledOnTouchOutside(false);
mLoadingDialog.setCancelable(false);
~~~
In the code above, we firstly initialize the mListAdapter and invoke the setAdapter() method of RecyclerView to set it as listView's adapter. Then initialize the mLoadingDialog to show messages.
在上面的代码中, 我们首先初始化 mListAdapter 并调用 recyclclerview的 setAdapter () 方法将其设置为 listView 的适配器。然后初始化 mLoadingDialog 来显示消息。

Furthermore, implement the following two methods to show and hide the mLoadingDialog dialog:
此外, 实现以下两种方法来显示和隐藏 mLoadingDialog 对话框:
~~~
private void showProgressDialog() {
    runOnUiThread(new Runnable() {
        public void run() {
            if (mLoadingDialog != null) {
                mLoadingDialog.show();
            }
        }
    });
}
private void hideProgressDialog() {
    runOnUiThread(new Runnable() {
        public void run() {
            if (null != mLoadingDialog && mLoadingDialog.isShowing()) {
                mLoadingDialog.dismiss();
            }
        }
    });
}
~~~

Lastly, continue to implement the methods as shown below:
最后, 继续实现以下方法:
~~~
private MediaManager.FileListStateListener updateFileListStateListener = new MediaManager.FileListStateListener() {
    @Override
    public void onFileListStateChange(MediaManager.FileListState state) {
        currentFileListState = state;
    }
};
private void initMediaManager() {
    if (DemoApplication.getProductInstance() == null) {
        mediaFileList.clear();
        mListAdapter.notifyDataSetChanged();
        DJILog.e(TAG, "Product disconnected");
        return;
    } else {
        if (null != DemoApplication.getCameraInstance() && DemoApplication.getCameraInstance().isMediaDownloadModeSupported()) {
            mMediaManager = DemoApplication.getCameraInstance().getMediaManager();
        } else if (null != DemoApplication.getCameraInstance()
                && !DemoApplication.getCameraInstance().isMediaDownloadModeSupported()) {
            setResultToToast("Media Download Mode not Supported");
        }
    }
    return;
}
~~~

In the code above, we implement the following features:
在上面的代码中, 我们实现了以下特性:

  1.Firslty, initialize the updateFileListStateListener and update the value of currentFileListState variable inside the onFileListStateChange callback method.
  1.首先, 初始化 updatefiliststatelistener 并在onFileListStateChange callback方法内更新currentFileListState的值。

  2.Next, in the initMediaManager() method, check if the product is connected, if not, reset the mediaFileList and invoke the notifyDataSetChanged() method of FileListAdapter to update the listView.
  2.接下来, 在 initMediaManager ()方法中, 检查无人机是否连接, 如果没有, 则重置 mediaFileList并调用 FileListAdapter 的 notifyDataSetChanged 方法来更新 listView。

  3.If the product is connected, initialize the mMediaManager by invoking the getMediaManager() method of Camera.
  3.如果该无人机被连接, 通过调用 Camera 的 getMediaManager 方法来初始化 mMediaManager。

**Fetching Media File List**
**获取多媒体文件列表**

Once we have finished the steps above, we can start to fetch the media files list from the Camera SD card and show them on the listView.
一旦我们完成上面的步骤, 我们就可以开始从摄像头 SD 卡中获取多媒体文件列表, 并将它们显示在列表中。

Implement the following methods as shown below:
执行以下方法, 如下所示:
~~~
private void getFileList() {
    mMediaManager = DemoApplication.getCameraInstance().getMediaManager();
    if (mMediaManager != null) {
        if ((currentFileListState == MediaManager.FileListState.SYNCING) || (currentFileListState == MediaManager.FileListState.DELETING)){
            DJILog.e(TAG, "Media Manager is busy.");
        }else{
            mMediaManager.refreshFileList(new CommonCallbacks.CompletionCallback() {
                @Override
                public void onResult(DJIError error) {
                    if (null == error) {
                        hideProgressDialog();
                        //Reset data
                        if (currentFileListState != MediaManager.FileListState.INCOMPLETE) {
                            mediaFileList.clear();
                            lastClickViewIndex = -1;
                            lastClickView = null;
                        }
                        mediaFileList = mMediaManager.getFileListSnapshot();
                        Collections.sort(mediaFileList, new Comparator<MediaFile>() {
                            @Override
                            public int compare(MediaFile lhs, MediaFile rhs) {
                                if (lhs.getTimeCreated() < rhs.getTimeCreated()) {
                                    return 1;
                                } else if (lhs.getTimeCreated() > rhs.getTimeCreated()) {
                                    return -1;
                                }
                                return 0;
                            }
                        });
                        scheduler.resume(new CommonCallbacks.CompletionCallback() {
                            @Override
                            public void onResult(DJIError error) {
                                if (error == null) {
                                    getThumbnails();
                                    getPreviews();
                                }
                            }
                        });
                    } else {
                        hideProgressDialog();
                        setResultToToast("Get Media File List Failed:" + error.getDescription());
                    }
                }
            });
        }
    }
}
private void getThumbnailByIndex(final int index) {
    FetchMediaTask task = new FetchMediaTask(mediaFileList.get(index), FetchMediaTaskContent.THUMBNAIL, taskCallback);
    scheduler.moveTaskToEnd(task);
}
private void getPreviewByIndex(final int index) {
    FetchMediaTask task = new FetchMediaTask(mediaFileList.get(index), FetchMediaTaskContent.PREVIEW, taskCallback);
    scheduler.moveTaskToEnd(task);
}
private void getThumbnails() {
    if (mediaFileList.size() <= 0) {
        setResultToToast("No File info for downloading thumbnails");
        return;
    }
    for (int i = 0; i < mediaFileList.size(); i++) {
        getThumbnailByIndex(i);
    }
}
private void getPreviews() {
    if (mediaFileList.size() <= 0) {
        setResultToToast("No File info for downloading previews");
        return;
    }
    for (int i = 0; i < mediaFileList.size(); i++) {
        getPreviewByIndex(i);
    }
}
private FetchMediaTask.Callback taskCallback = new FetchMediaTask.Callback() {
    @Override
    public void onUpdate(MediaFile file, FetchMediaTaskContent option, DJIError error) {
        if (null == error) {
            if (option == FetchMediaTaskContent.PREVIEW) {
                runOnUiThread(new Runnable() {
                    public void run() {
                        mListAdapter.notifyDataSetChanged();
                    }
                });
            }
            if (option == FetchMediaTaskContent.THUMBNAIL) {
                runOnUiThread(new Runnable() {
                    public void run() {
                        mListAdapter.notifyDataSetChanged();
                    }
                });
            }
        } else {
            DJILog.e(TAG, "Fetch Media Task Failed" + error.getDescription());
        }
    }
};
~~~

In the code above, we implement the following features:
在上面的代码中, 我们实现了以下特性:

  1.In the getFileList() method, we fetch the latest mMediaManager object and check if it's not null. Then check the value of the currentFileListState variable. If the state is neither SYNCING nor DELETING, invoke the refreshFileList() method of MediaManager to refresh the file list from the SD card.
  1.在 getFileList ()方法中, 我们将获取最新的 mMediaManager 对象, 并检查它是否为空。 然后检查 currentFileListState 变量的值。 如果状态既不同步也不删除, 则调用 MediaManager 的refreshFileList()方法从 SD 卡刷新文件列表。

  2.In the onResult() callback method, if there is no error, then check if the currentFileListState value is not equal to MediaManager.FileListState.INCOMPLETE and reset the mediaFileList list, the lastClickViewIndex and the lastClickView variables.
  2.在 onResult ()回调方法中, 如果没有错误, 那么检查 currentFileListState 值是否等于 MediaManager.FileListState.INCOMPLETE, 并重置 mediaFileList 列表、 lastClickViewIndex 和 lastClickView 变量。

  3.Invoke the getFileListSnapshot() method of MediaManager to get the current file list and store it in the mediaFileList variable.
  3.调用 MediaManager 的getFileListSnapshot()方法获取当前的文件列表, 并将其存储在mediaFileList变量中。

  4.Sort the media files in the mediaFileList based on the created time. Then invoke the resume() method of FetchMediaTaskScheduler to resume the scheduler and invoke the getThumbnails() and getPreviews() methods in the onResult() callback method. If there is an error, invoke the hideProgressDialog() method to hide the progress dialog.
  4.根据所创建的时间对多媒体文件进行排序。 然后调用 FetchMediaTaskScheduler 的resume()方法来resume the scheduler，并在 onResult ()回调方法中调用 getThumbnails ()和 getPreviews ()方法。 如果有错误, 请调用隐藏进度对话框方法来隐藏进度对话框。

  5.Next, create the getThumbnailByIndex() and getPreviewByIndex() methods to initialize the FetchMediaTask tasks for FetchMediaTaskContent.THUMBNAIL and FetchMediaTaskContent.PREVIEW, and then move the tasks to the end of FetchMediaTaskScheduler.
  5.接下来, 创建 getThumbnailByIndex ()和getPreviewByIndex()方法来初始化 FetchMediaTask tasks给FetchMediaTaskContent, 然后将任务移到FetchMediaTaskScheduler尾部。

  6.After that, create the getThumbnails() and getPreviews() methods to go through the files in the mediaFileList and invoke the getThumbnailByIndex() and getPreviewByIndex() methods to initialize the FetchMediaTask tasks.
  6.在这之后, 创建 getThumbnails ()和getPreviews()方法来浏览 mediaFileList 中的文件, 并调用 getThumbnailByIndex ()和getPreviewByIndex()方法去初始化FetchMediaTask。

  7.Lastly, initialize the taskCallback variable and implement the onUpdate() callback method. If there is no error, check the value of the option variable. If the value is equal to either FetchMediaTaskContent.PREVIEW or FetchMediaTaskContent.THUMBNAIL, invoke the notifyDataSetChanged() method of the FileListAdapter in the UI thread to update the listView.
  7.最后, 初始化taskCallback 变量并实现 onUpdate ()回调方法。 如果没有错误, 请检查 option 变量的值。 如果值等于 FetchMediaTaskContent.PREVIEW 或 FetchMediaTaskContent.THUMBNAIL, 在UI 线程中 调用FileListAdapter 的notifyDataSetChanged()方法来更新列表视图。

Once you finish the steps above, continue to insert the following code below the mMediaManager = DemoApplication.getCameraInstance().getMediaManager(); in the initMediaManager() method:
一旦完成上面的步骤,在 initMediaManager ()方法中，mMediaManager = DemoApplication.getCameraInstance().getMediaManager()后面插入下面的代码:
~~~
if (null != mMediaManager) {
    mMediaManager.addUpdateFileListStateListener(this.updateFileListStateListener);
    DemoApplication.getCameraInstance().setMode(SettingsDefinitions.CameraMode.MEDIA_DOWNLOAD, new CommonCallbacks.CompletionCallback() {
        @Override
        public void onResult(DJIError error) {
            if (error == null) {
                DJILog.e(TAG, "Set cameraMode success");
                showProgressDialog();
                getFileList();
            } else {
                setResultToToast("Set cameraMode failed");
            }
        }
    });
    if (mMediaManager.isVideoPlaybackSupported()) {
        DJILog.e(TAG, "Camera support video playback!");
    } else {
        setResultToToast("Camera does not support video playback!");
    }
    scheduler = mMediaManager.getScheduler();
}
~~~

In the code above, we implement the following features:
在上面的代码中, 我们实现了以下特性:
  1.Check if the mMediaManager is not null, then invoke the addUpdateFileListStateListener() method of mMediaManager to add listener for file list state update.
  1.检查 mMediaManager 是否为 null, 然后调用 mMediaManager 的 addupdatefilelistelistener ()方法为文件列表状态更新添加侦听器。

  2.Invoke the setMode() method of Camera and set the CameraMode to MEDIA_DOWNLOAD. In the completion block, if there is no error, invoke the showProgressDialog() method to show the fetch file progress and invoke the getFileList() method to fetch the media file list. Lastly, initialize the FetchMediaTaskScheduler to schedule the fetch media file task.
  2.调用摄像头的 setMode ()方法, 并将 CameraMode 设置为 MEDIA download。 在完成块中, 如果没有错误, 调用 showProgressDialog 方法来显示获取文件进度框并调用 getFileList 方法去获取多媒体文件列表。最后, 初始化 FetchMediaTaskScheduler 来schedule fetch media 文件任务。

Furthermore, create a new XML Layout file and name it as "media_info_item.xml" in the layout folder, replace the code with the following:
此外, 创建一个新的 XML 布局文件, 并在布局文件夹中命名为"media info item.XML", 用以下代码取代:
~~~
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/parent"
    android:layout_width="250dp"
    android:layout_height="wrap_content"
    android:background="@drawable/background_selector"
    android:orientation="horizontal">
    <ImageView
        android:id="@+id/filethumbnail"
        android:layout_width="110dp"
        android:layout_height="80dp"
        android:layout_alignParentStart="true"
        android:layout_alignParentTop="true"
        android:minHeight="150dp"
        android:minWidth="250dp"
        android:scaleType="fitXY" />
    <TextView
        android:id="@+id/filename"
        android:layout_width="140dp"
        android:layout_height="20dp"
        android:layout_alignParentTop="true"
        android:layout_toEndOf="@+id/filethumbnail"
        android:clickable="false"
        android:text="FileName" />
    <TextView
        android:id="@+id/filetype"
        android:layout_width="140dp"
        android:layout_height="20dp"
        android:layout_below="@+id/filename"
        android:layout_toEndOf="@+id/filethumbnail"
        android:clickable="false"
        android:text="FileType" />
    <TextView
        android:id="@+id/fileSize"
        android:layout_width="140dp"
        android:layout_height="20dp"
        android:layout_below="@+id/filetype"
        android:layout_toEndOf="@+id/filethumbnail"
        android:clickable="false"
        android:text="FileSize" />
    <TextView
        android:id="@+id/filetime"
        android:layout_width="140dp"
        android:layout_height="20dp"
        android:layout_below="@+id/fileSize"
        android:layout_toEndOf="@+id/filethumbnail"
        android:clickable="false"
        android:text="FileTime" />
</RelativeLayout>
~~~

In the code above, we define the layout of the ItemHolder in listView. Add one ImageView on the left side and four TextViews on the right side as shown below:
在上面的代码中, 我们定义了 listView 中 ItemHolder 的布局。 在左侧添加一个 ImageView, 右侧添加4个 TextViews, 如下图所示:
![](https://devcn.djicdn.com/images/tutorials-and-samples/Android/MediaManagerDemo/media_info_item-bce666ff44.png)
ItemHolder

Lastly, continue to implement the following methods to show fetched media files in the listView:
最后, 继续实现以下方法以在 listView 中显示的获取到的多媒体文件:
~~~
private class ItemHolder extends RecyclerView.ViewHolder {
    ImageView thumbnail_img;
    TextView file_name;
    TextView file_type;
    TextView file_size;
    TextView file_time;
    public ItemHolder(View itemView) {
        super(itemView);
        this.thumbnail_img = (ImageView) itemView.findViewById(R.id.filethumbnail);
        this.file_name = (TextView) itemView.findViewById(R.id.filename);
        this.file_type = (TextView) itemView.findViewById(R.id.filetype);
        this.file_size = (TextView) itemView.findViewById(R.id.fileSize);
        this.file_time = (TextView) itemView.findViewById(R.id.filetime);
    }
}
private class FileListAdapter extends RecyclerView.Adapter<ItemHolder> {
    @Override
    public int getItemCount() {
        if (mediaFileList != null) {
            return mediaFileList.size();
        }
        return 0;
    }
    @Override
    public ItemHolder onCreateViewHolder(ViewGroup parent, int viewType) {
        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.media_info_item, parent, false);
        return new ItemHolder(view);
    }
    @Override
    public void onBindViewHolder(ItemHolder mItemHolder, final int index) {
        final MediaFile mediaFile = mediaFileList.get(index);
        if (mediaFile != null) {
            if (mediaFile.getMediaType() != MediaFile.MediaType.MOV && mediaFile.getMediaType() != MediaFile.MediaType.MP4) {
                mItemHolder.file_time.setVisibility(View.GONE);
            } else {
                mItemHolder.file_time.setVisibility(View.VISIBLE);
                mItemHolder.file_time.setText(mediaFile.getDurationInSeconds() + " s");
            }
            mItemHolder.file_name.setText(mediaFile.getFileName());
            mItemHolder.file_type.setText(mediaFile.getMediaType().name());
            mItemHolder.file_size.setText(mediaFile.getFileSize() + " Bytes");
            mItemHolder.thumbnail_img.setImageBitmap(mediaFile.getThumbnail());
            mItemHolder.thumbnail_img.setOnClickListener(ImgOnClickListener);
            mItemHolder.thumbnail_img.setTag(mediaFile);
            mItemHolder.itemView.setTag(index);
            if (lastClickViewIndex == index) {
                mItemHolder.itemView.setSelected(true);
            } else {
                mItemHolder.itemView.setSelected(false);
            }
            mItemHolder.itemView.setOnClickListener(itemViewOnClickListener);
        }
    }
}
private View.OnClickListener itemViewOnClickListener = new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        lastClickViewIndex = (int) (v.getTag());
        if (lastClickView != null && lastClickView != v) {
            lastClickView.setSelected(false);
        }
        v.setSelected(true);
        lastClickView = v;
    }
};
private View.OnClickListener ImgOnClickListener = new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        MediaFile selectedMedia = (MediaFile )v.getTag();
        final Bitmap previewImage = selectedMedia.getPreview();
        runOnUiThread(new Runnable() {
            public void run() {
                mDisplayImageView.setVisibility(View.VISIBLE);
                mDisplayImageView.setImageBitmap(previewImage);
            }
        });
    }
};
~~~

The code above implements:
上面的代码实现:

  1.Define the ItemHolder class, which extends from the RecyclerView.ViewHolder. Inside the class, define one ImageView and four TextViews and initialize them by invoking the findViewById() method.
  1.定义继承自 RecyclerView.ViewHolder 的 ItemHolder 类。 在类中, 定义一个 ImageView 和四个 TextViews, 并通过调用 findViewById ()方法初始化它们。

  2.Define the FileListAdapter class and extend it from RecyclerView.Adapter<ItemHolder>. In this class, Override the getItemCount() method and return the size of the mediaFileList.
  2.定义继承自RecyclerView.Adapter<ItemHolder>的 FileListAdapter 类,。在这个类中, 重写 getItemCount ()方法, 并返回多媒体文件列表的大小。

  3.Moreover, in the onCreateViewHolder method, we define the layout of the ItemHolder in listView using the "media_info_item.xml" file.
  3.此外, 在 onCreateViewHolder 方法中, 我们在ListView 中使用media_info_item.xml定义了itemHolder的layout。

  4.In the onBindViewHolder method, get the mediaFile variable from the mediaFileList by using the index value. Then update the infos of the ItemHolder with this mediaFile, like file_name, file_type, thumbnail_img, etc. Set the mediaFile as the tag of thumbnail_img and set the tag of itemView as the index value. We will use them later. Also, invoke the setOnClickListener() method of ImageView to register the callback to be invoked when the thumbnail_img is clicked.
  4.在 onBindViewHolder 方法中, 在mediaFileList中使用index值获取mediaFile变量。 然后用mediaFile更新ItemHolder 的内容, 比如文件名、文件类型、缩略图等。 将mediaFile设置为缩略图 img 的标签, 并将 itemView 的标签设置为index值。我们稍后会使用它。此外,调用 ImageView 的 setOnClickListener 方法来注册在点击thumbnail_img时的回调。

  5.Furthermore, if the current ItemHolder is selected, invoke the setSelected() method of its itemView variable and pass true to it. Then, invoke the setOnClickListener() method and pass the itemViewOnClickListener variable to register the callback to be invoked when the itemView is clicked.
  5.此外, 如果当前的 ItemHolder 被选中, 则调用其 itemView 变量的 setSelected 方法并传递ture给它。然后, 调用setOnClickListener ()方法, 并通过 itemViewOnClickListener 变量来注册当 itemView 被点击时调用的回调。

  6.Next, initialize the itemViewOnClickListener and ImgOnClickListener variables and override their onClick() methods. When the itemView is clicked, update the value of lastClickViewIndex and the selected state of lastClickView. When the thumbnail_img is clicked, create the selectedMedia variable by invoking the getTag() method of the selected thumbnail_img and then invoke the getPreview() method of MediaFile to fetch the Preview image and store it in the previewImage variable. Lastly, show the mDisplayImageView and set the previewImage as the content of it.
  6.接下来, 初始化 itemViewOnClickListener 和 ImgOnClickListener 变量, 并重写 onClick ()方法。 当 itemView 被点击时, 更新 lastClickViewIndex 的值和 lastClickView 的选定状态。 当缩略图被点击时, 通过调用选中缩略图的 getTag 方法创建selectedMedia变量, 然后调用 MediaFile 的 getPreview 方法来获取预览图像, 并将其存储在previewImage变量中。最后, 显示 mDisplayImageView, 设置previewImage作为它的内容。

For more details of the implementation, please check the sample code of this tutorial on Github.
有关实现的详细信息, 请检查 Github 教程的示例代码。

So far, we have finished implementing refreshing the media file list, and show them in the RecyclerView listView. Also, you can select a specific media file and preview the image.
到目前为止, 我们已经实现了刷新多媒体文件列表功能,并将它们展示在RecyclerView中。此外, 您还可以选择特定的多媒体文件并预览图像。

Now, build and run the project and install it to your Android device. If everything goes well, you should see something similar to the following gif animation:
现在, 构建并运行这个项目并安装到你的 Android 设备上。 如果一切顺利, 你应该看到类似于下面的 gif 动画:
![](https://devcn.djicdn.com/images/tutorials-and-samples/Android/MediaManagerDemo/refreshFiles-dc0a27386f.gif)

**Downloading and Editing the Media Files**
**下载及编辑多媒体文件**

Once you finish the steps above, continue to add the following codes at the beginning of the MainActivity class:
一旦完成上面的步骤, 继续在 MainActivity 类的开始添加以下代码:
~~~
private ProgressDialog mDownloadDialog;
File destDir = new File(Environment.getExternalStorageDirectory().getPath() + "/MediaManagerDemo/");
private int currentProgress = -1;
~~~

In the code above, we define the mDownloadDialog, destDir and currentProgress variables for media files downloading.
在上面的代码中, 我们定义 mDownloadDialog, destDir 和 currentProgress 变量, 用于多媒体文件下载。

Moveover, add the following code in the initUI() method:
在 initUI ()方法中添加以下代码:
~~~
//Init Download Dialog
mDownloadDialog = new ProgressDialog(MainActivity.this);
mDownloadDialog.setTitle("Downloading file");
mDownloadDialog.setIcon(android.R.drawable.ic_dialog_info);
mDownloadDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
mDownloadDialog.setCanceledOnTouchOutside(false);
mDownloadDialog.setCancelable(true);
mDownloadDialog.setOnCancelListener(new DialogInterface.OnCancelListener() {
    @Override
    public void onCancel(DialogInterface dialog) {
        if (mMediaManager != null) {
            mMediaManager.exitMediaDownloading();
        }
    }
});
~~~

Here, we initialize the mDownloadDialog and configure different settings for it. Also, override the onCancel() callback method of OnCancelListener and invoke the exitMediaDownloading() method of MediaManager to stop the media fil downloading process when the cancel button is pressed.
在这里, 我们初始化 mDownloadDialog 并为它设置不同的属性。另外, 重写 OnCancelListener 的 onCancel ()回调方法, 并调用 MediaManager 的 exitMediaDownloading 方法用来在按下取消按钮时停止多媒体下载过程。

Next, implement the following methods to show and hide the download mDownloadDialog:
接下来, 实现下面的方法来显示和隐藏 mDownloadDialog:
~~~
private void ShowDownloadProgressDialog() {
    if (mDownloadDialog != null) {
        runOnUiThread(new Runnable() {
            public void run() {
                mDownloadDialog.incrementProgressBy(-mDownloadDialog.getProgress());
                mDownloadDialog.show();
            }
        });
    }
}
private void HideDownloadProgressDialog() {
    if (null != mDownloadDialog && mDownloadDialog.isShowing()) {
        runOnUiThread(new Runnable() {
            public void run() {
                mDownloadDialog.dismiss();
            }
        });
    }
}
~~~

Once you finish the work above, continue to implement the following two methods:
完成上述工作后, 继续执行以下两种方法:
~~~
private void downloadFileByIndex(final int index){
    if ((mediaFileList.get(index).getMediaType() == MediaFile.MediaType.PANORAMA)
            || (mediaFileList.get(index).getMediaType() == MediaFile.MediaType.SHALLOW_FOCUS)) {
        return;
    }
    mediaFileList.get(index).fetchFileData(destDir, null, new DownloadListener<String>() {
        @Override
        public void onFailure(DJIError error) {
            HideDownloadProgressDialog();
            setResultToToast("Download File Failed" + error.getDescription());
            currentProgress = -1;
        }
        @Override
        public void onProgress(long total, long current) {
        }
        @Override
        public void onRateUpdate(long total, long current, long persize) {
            int tmpProgress = (int) (1.0 * current / total * 100);
            if (tmpProgress != currentProgress) {
                mDownloadDialog.setProgress(tmpProgress);
                currentProgress = tmpProgress;
            }
        }
        @Override
        public void onStart() {
            currentProgress = -1;
            ShowDownloadProgressDialog();
        }
        @Override
        public void onSuccess(String filePath) {
            HideDownloadProgressDialog();
            setResultToToast("Download File Success" + ":" + filePath);
            currentProgress = -1;
        }
    });
}
private void deleteFileByIndex(final int index) {
    ArrayList<MediaFile> fileToDelete = new ArrayList<MediaFile>();
    if (mediaFileList.size() > index) {
        fileToDelete.add(mediaFileList.get(index));
        mMediaManager.deleteFiles(fileToDelete, new CommonCallbacks.CompletionCallbackWithTwoParam<List<MediaFile>, DJICameraError>() {
            @Override
            public void onSuccess(List<MediaFile> x, DJICameraError y) {
                DJILog.e(TAG, "Delete file success");
                runOnUiThread(new Runnable() {
                    public void run() {
                        MediaFile file = mediaFileList.remove(index);
                        //Reset select view
                        lastClickViewIndex = -1;
                        lastClickView = null;
                        //Update recyclerView
                        mListAdapter.notifyItemRemoved(index);
                    }
                });
            }
            @Override
            public void onFailure(DJIError error) {
                setResultToToast("Delete file failed");
            }
        });
    }
}
~~~
In the code above, we implement the following features:
在上面的代码中, 我们实现了以下功能:

  1.In the downloadFileByIndex() method, we firstly check if the media type is either PANORAMA or SHALLOW_FOCUS by invoking the getMediaType() method of MediaFile, if not, continue to execute.
  1.在downloadFileByIndex()方法中, 我们首先通过调用 MediaFile 的 getMediaType 方法去检查多媒体类型是PANORAMA还是SHALLOW_FOCUS。如果不是，在继续执行

  2.Invoke the fetchFileData() method of MediaFile to fetch the media files' full resolution data from the SD card. In the onFailure() method, invoke the HideDownloadProgressDialog() method to hide the mDownloadDialog, also reset the value of the currentProgress variable to -1.
  2.调用 MediaFile 的 fetchFileData 方法从 SD 卡中获取多媒体文件的完整分辨率数据。 在"onFailure ()方法中, 调用 HideDownloadProgressDialog 方法来隐藏 mDownloadDialog, 并且重置currentProgress变量的值为 -1。

  3.In the onRateUpdate() method, we calculate the current download progress and save it to the tmpProgress variable. Then update the mDownloadDialog and currentProgress based on this variable. In the onStart() method, reset the currentProgress variable and invoke the ShowDownloadProgressDialog() method to show the mDownloadDialog.
  3.在 onRateUpdate ()方法中, 我们计算当前的下载进度, 并将它保存到 tmpProgress 变量。 然后根据这个变量更新 mDownloadDialog 和 currentProgress。 在 onStart ()方法中, 重置 currentProgress 变量并调用 ShowDownloadProgressDialog() 方法来显示 mDownloadDialog。

  4.In the onSuccess() method, invoke the HideDownloadProgressDialog() method to hide the mDownloadDialog and reset the currentProgress variable.
  4.在 onSuccess 方法中, 调用 HideDownloadProgressDialog 方法来隐藏 mDownloadDialog 并重置 currentProgress 变量。

  5.Moreover, in the deleteFileByIndex() method, we firstly create an ArrayList variable fileToDelete, then check if the size of the mediaFileList is bigger than the index. Next, invoke the add() method of ArrayList and to add the selected media file you want to delete. Invoke the deleteFiles() method of MediaManager() and pass the fileToDelete variable to delete media files from SD card. In the completion block, we override the onSuccess() method to reset the selected view, and update the listView with the removed item.
  5.此外, 在in the deleteFileByIndex()方法中, 我们首先创建了一个 ArrayList 变量类型的fileToDelete, 然后检查mediaFileList 的大小是否大于index。 接下来, 调用ArrayList的add()方法, 并添加要删除的多媒体文件。 调用 MediaManager ()的deleteFiles()方法, 并通过 fileToDelete 变量从 SD 卡中删除多媒体文件。 在完成块中, 我们重写 onSuccess 方法来重置被选中的View, 并在 listView中更新已移除的item（这里的更新即删除）。

Lastly, implement the onClick() method of delete_btn, reload_btn and download_btn buttons as shown below:
最后, 实现delete_btn, reload_btn 和 download_btn的 onClick 方法, 如下所示:

~~~
case R.id.delete_btn:{
    deleteFileByIndex(lastClickViewIndex);
    break;
}
case R.id.reload_btn: {
    getFileList();
    break;
}
case R.id.download_btn: {
    downloadFileByIndex(lastClickViewIndex);
    break;
}
~~~

For more details of the implementation, please check the sample code of this tutorial on Github.
有关实现的详细信息, 请检查 Github 教程的示例代码。

Now, we can test the features we have implemented so far. Build and run the project and install it to your Android device. If everything goes well, you should see something similar to the following gif animation:
现在, 我们测试一下我们实现的功能。构建并运行这个APP并安装到你的 Android 设备上。 如果一切顺利, 你应该看到类似于下面的 gif 动画:
![](https://devcn.djicdn.com/images/tutorials-and-samples/Android/MediaManagerDemo/editFiles-95ae9259f9.gif)

**Working on the Video Playback**
**实现视频回放**

Now, continue to implement the video playback feature of MediaManager. In the onDestroy() method, insert the following code below the lastClickView = null; :
现在, 继续实现 MediaManager 的video playback功能。 在 onDestroy ()方法中, 在 lastClickView = null 下面插入以下代码: :
~~~
if (mMediaManager != null) {
    mMediaManager.stop(null);
    mMediaManager.removeFileListStateCallback(this.updateFileListStateListener);
    mMediaManager.removeMediaUpdatedVideoPlaybackStateListener(updatedVideoPlaybackStateListener);
    mMediaManager.exitMediaDownloading();
    if (scheduler!=null) {
      scheduler.removeAllTasks();
    }
}
~~~
Here, we invoke the stop() method of MediaManager to stop the playing video. Then invoke the removeMediaUpdatedVideoPlaybackStateListener() method to remove the listener. Moreover, invoke the removeFileListStateCallback() method to remove the file list state callback. Next, invoke the exitMediaDownloading() method to exit the MEDIA_DOWNLOAD mode and enter the SHOOT_PHOTO mode. Lastly, if the scheduler is not null, invoke the removeAllTasks() method to remove all the existing media tasks.
在这里, 我们调用 MediaManager的stop()方法去停止视频播放。然后调用 removeMediaUpdatedVideoPlaybackStateListener()方法来移除侦听器。此外, 调用removeFileListStateCallback()方法来移除文件列表状态回调。接下来, 调用 exitMediaDownloading ()方法退出多媒体下载模式并进入"SHOOT_PHOTO"模式。最后, 如果scheduler不是 null, 调用 removeAllTasks 方法来移除所有现有的多媒体任务。

Next, insert the following code below the mMediaManager.addUpdateFileListStateListener(this.updateFileListStateListener); in the initMediaManager() method:
接下来, 在 initMediaManager ()方法中，在mMediaManager.addUpdateFileListStateListener(this.updateFileListStateListener)下面插入以下代码 ; :
~~~
mMediaManager.addMediaUpdatedVideoPlaybackStateListener(this.updatedVideoPlaybackStateListener);
~~~
In the code above, invoke the addMediaUpdatedVideoPlaybackStateListener() method and pass the updatedVideoPlaybackStateListener variable to add the listener for video playback state update.
在上面的代码中, 调用addMediaUpdatedVideoPlaybackStateListener()方法, 然后通过updatedVideoPlaybackStateListener变量, 去添加视频回放状态更新的监听器。

Furthermore, initialize the updatedVideoPlaybackStateListener variable and implement the updateStatusTextView() and addLineToSB() methods as shown below:
此外, 初始化updatedVideoPlaybackStateListener变量, 并实现 updateStatusTextView ()和 addLineToSB () , 如下所示:
~~~
private MediaManager.VideoPlaybackStateListener updatedVideoPlaybackStateListener =
        new MediaManager.VideoPlaybackStateListener() {
            @Override
            public void onUpdate(MediaManager.VideoPlaybackState videoPlaybackState) {
                updateStatusTextView(videoPlaybackState);
            }
        };
private void updateStatusTextView(MediaManager.VideoPlaybackState videoPlaybackState) {
    final StringBuffer pushInfo = new StringBuffer();
    addLineToSB(pushInfo, "Video Playback State", null);
    if (videoPlaybackState != null) {
        if (videoPlaybackState.getPlayingMediaFile() != null) {
            addLineToSB(pushInfo, "media index", videoPlaybackState.getPlayingMediaFile().getIndex());
            addLineToSB(pushInfo, "media size", videoPlaybackState.getPlayingMediaFile().getFileSize());
            addLineToSB(pushInfo,
                    "media duration",
                    videoPlaybackState.getPlayingMediaFile().getDurationInSeconds());
            addLineToSB(pushInfo, "media created date", videoPlaybackState.getPlayingMediaFile().getDateCreated());
            addLineToSB(pushInfo,
                    "media orientation",
                    videoPlaybackState.getPlayingMediaFile().getVideoOrientation());
        } else {
            addLineToSB(pushInfo, "media index", "None");
        }
        addLineToSB(pushInfo, "media current position", videoPlaybackState.getPlayingPosition());
        addLineToSB(pushInfo, "media current status", videoPlaybackState.getPlaybackStatus());
        addLineToSB(pushInfo, "media cached percentage", videoPlaybackState.getCachedPercentage());
        addLineToSB(pushInfo, "media cached position", videoPlaybackState.getCachedPosition());
        pushInfo.append("\n");
        setResultToText(pushInfo.toString());
    }
}
private void addLineToSB(StringBuffer sb, String name, Object value) {
    if (sb == null) return;
    sb.
            append((name == null || "".equals(name)) ? "" : name + ": ").
            append(value == null ? "" : value + "").
            append("\n");
}
private void setResultToText(final String string) {
    if (mPushTv == null) {
        setResultToToast("Push info tv has not be init...");
    }
    MainActivity.this.runOnUiThread(new Runnable() {
        @Override
        public void run() {
            mPushTv.setText(string);
        }
    });
}
~~~

Here, we implement the following features:
在这里, 我们实现了以下特性:

  1.When intialize the updatedVideoPlaybackStateListener, we override the onUpdate() method. Then invoke the updateStatusTextView() method by passing the videoPlaybackState variable as param to update the video playback status info in the mPushTv TextView.
  1.当初始化 updatedVideoPlaybackStateListener 时, 我们重写 onUpdate 方法。 然后调用 updateStatusTextView ()方法, 通过传递videoPlaybackState变量作为参数去更新在 mPushTv TextView 中视频回放状态信息。

  2.In the updateStatusTextView() method, we create the pushInfo variable firstly and invoke the addLineToSB() method to append video playback state info. Then invoke the setResultToText() method to show it it the mPushTv TextView.（it应该为in）
  2.在 updateStatusTextView ()方法中, 我们首先创建 pushInfo 变量, 并调用 addLineToSB ()方法来添加视频播放状态信息。然后调用 setResultToText ()方法来显示它, 在mPushTv TextView中。

Moreover, continue to implement the following methods:
此外, 继续实现以下方法:

~~~
private void playVideo() {
    mDisplayImageView.setVisibility(View.INVISIBLE);
    MediaFile selectedMediaFile = mediaFileList.get(lastClickViewIndex);
    if ((selectedMediaFile.getMediaType() == MediaFile.MediaType.MOV) || (selectedMediaFile.getMediaType() == MediaFile.MediaType.MP4)) {
        mMediaManager.playVideoMediaFile(selectedMediaFile, new CommonCallbacks.CompletionCallback() {
            @Override
            public void onResult(DJIError error) {
                if (null != error) {
                    setResultToToast("Play Video Failed" + error.getDescription());
                } else {
                    DJILog.e(TAG, "Play Video Success");
                }
            }
        });
    }
}
private void moveToPosition(){
    LayoutInflater li = LayoutInflater.from(this);
    View promptsView = li.inflate(R.layout.prompt_input_position, null);
    AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(this);
    alertDialogBuilder.setView(promptsView);
    final EditText userInput = (EditText) promptsView.findViewById(R.id.editTextDialogUserInput);
    alertDialogBuilder.setCancelable(false).setPositiveButton("OK", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {
            String ms = userInput.getText().toString();
            mMediaManager.moveToPosition(Integer.parseInt(ms),
                    new CommonCallbacks.CompletionCallback() {
                        @Override
                        public void onResult(DJIError error) {
                            if (null != error) {
                                setResultToToast("Move to video position failed" + error.getDescription());
                            } else {
                                DJILog.e(TAG, "Move to video position successfully.");
                            }
                        }
                    });
        }
    })
            .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();
                }
            });
    AlertDialog alertDialog = alertDialogBuilder.create();
    alertDialog.show();
}
~~~

Here, we implement the following features:
在这里, 我们实现了以下特性:

  1.In the playVideo() method, we firstly hide the mDisplayImageView image view. Then initialize the selectedMediaFile variable and check if the media type is either MOV or MP4. If so, invoke the playVideoMediaFile() method of MediaManager and pass the selectedMediaFile variable as the param to start the video playback. In the completion block, override the onResult() method to show toast message to inform users if there is any error.
  1.在 playVideo ()方法中, 我们首先隐藏 mDisplayImageView 图像View。 然后初始化selectedMediaFile变量, 检查多媒体类型是 MOV 还是 MP4。 如果是, 调用 MediaManager 的 playVideoMediaFile 方法, 并通过 selectedMediaFile 变量作为参数去启动视频回放。在完成块中, 重写 onResult 方法，在出现任何错误时通过显示 toast 消息去通知用户。

  2.In the moveToPosition() method, we firstly create the promptsView from the layout of prompt_input_position. Then initialize the alertDialogBuilder and set its view as promptsView. After that, initialize the userInput variable from the promptsView. Invoke the setCancelable() method to set dialog as not cancelable. Also invoke the setPositiveButton() method to set a listener to be invoked when the positive button of the dialog is pressed. Moreover, override the onClick() method and invoke the moveToPosition() method of MediaManager to skip to the new position in seconds from the start of the video.
  2.在moveToPosition() 方法中, 我们首先从提示输入位置的布局中创建提示视图。 然后初始化 alertDialogBuilder 并将其View设置为提示视图。 在此之后, 从提示视图中初始化 userInput 变量。 调用 setCancelable 方法将对话框设置为不可取消。还可以调用 setPositiveButton 方法来设置一个侦听器, 当按下对话框的positive按钮时调用侦听器。 此外, 重写 onClick ()方法, 调用 MediaManager 的 moveToPosition ()方法, 从视频起始处跳转到需要的位置。

Furthermore, create a new XML Layout file and name it as "prompt_input_position.xml" in the layout folder, replace the code with the following:
此外, 创建一个新的 XML 布局文件, 并在布局文件夹中命名为"prompt input position.XML", 代替以下代码:
~~~
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout_prompt"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:padding="10dp" >
    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Input Position : "
        android:textAppearance="?android:attr/textAppearanceLarge" />
    <EditText
        android:id="@+id/editTextDialogUserInput"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:inputType="number">
        <requestFocus />
    </EditText>
</LinearLayout>
~~~

In the code above, we create a TextView and a EditText as shown below:
在上面的代码中, 我们创建了一个 TextView 和一个 EditText, 如下所示:

![](https://devcn.djicdn.com/images/tutorials-and-samples/Android/MediaManagerDemo/prompt_input-2e0d92ba2d.png)


Lastly, let's implement the onClick() method of status_btn, play_btn, resume_btn, pause_btn, stop_btn and moveTo_btn as shown below:
最后, 让我们实现status_btn，play_btn, resume_btn, pause_btn, stop_btn 和 moveTo_btn  的 onClick 方法，如下图所示:
~~~
case R.id.status_btn: {
    if (mPushDrawerSd.isOpened()) {
        mPushDrawerSd.animateClose();
    } else {
        mPushDrawerSd.animateOpen();
    }
    break;
}
case R.id.play_btn: {
    playVideo();
    break;
}
case R.id.resume_btn: {
    mMediaManager.resume(new CommonCallbacks.CompletionCallback() {
        @Override
        public void onResult(DJIError error) {
            if (null != error) {
                setResultToToast("Resume Video Failed" + error.getDescription());
            } else {
                DJILog.e(TAG, "Resume Video Success");
            }
        }
    });
    break;
}
case R.id.pause_btn: {
    mMediaManager.pause(new CommonCallbacks.CompletionCallback() {
        @Override
        public void onResult(DJIError error) {
            if (null != error) {
                setResultToToast("Pause Video Failed" + error.getDescription());
            } else {
                DJILog.e(TAG, "Pause Video Success");
            }
        }
    });
    break;
}
case R.id.stop_btn: {
    mMediaManager.stop(new CommonCallbacks.CompletionCallback() {
        @Override
        public void onResult(DJIError error) {
            if (null != error) {
                setResultToToast("Stop Video Failed" + error.getDescription());
            } else {
                DJILog.e(TAG, "Stop Video Success");
            }
        }
    });
    break;
}
case R.id.moveTo_btn: {
    moveToPosition();
    break;
}
~~~
In the code above, we implement the following features:

在上面的代码中, 我们实现了以下特性:

  1.In the case of status_btn button, invoke the isOpened() method of the mPushDrawerSd variable to check if it's open, if so, invoke the animateClose() method of it to close the drawer with an animation. Otherwise, invoke the animateOpen() method of it to open the drawer with an animation.
  1.在status_btn的情况下, 调用 mPushDrawerSd 变量的 isopen()方法来检查它是否打开, 如果是的话, 调用 animateClose ()方法来关闭带动画的抽屉。 否则, 调用 animateOpen ()方法去打开动画绘制。

  2.In the case of play_btn button, invoke the playVideo() method to start the video playback.
  2.在播放按钮的情况下, 调用 playVideo ()方法来启动视频播放。

  3.In the case of resume_btn button, invoke the resume() method of MediaManager to resume the paused video and override the onResult() method and show toast message to inform user if there is any error.
  3.在恢复按钮的情况下, 调用 MediaManager 的resume()方法来恢复暂停的视频, 并重写 onResult ()方法, 并显示 toast 消息, 以便在有错误时通知用户。

  4.In the case of pause_btn button, invoke the pause() method of MediaManager to pause the playing video and override the onResult() method and show toast message to inform user if there is any error.
  4.在暂停按钮的情况下, 调用 MediaManager 的暂停方法来暂停播放视频, 并重写 onResult ()方法, 并显示 toast 消息, 以便在出现错误时通知用户。

  5.In the case of stop_btn button, invoke the stop() method of MediaManager to stop the playing video and override the onResult() method and show toast message to inform user if there is any error.
  5.在停止按钮的情况下, 调用 MediaManager 的 stop ()方法来停止播放视频, 并重写 onResult ()方法, 并显示 toast 消息, 以便在有错误时通知用户。

  6.Lastly, for the case of moveTo_btn button, invoke the moveToPosition() method to skip to the new position in seconds from the start of the video.
  6.最后, 对于 moveTo btn 按钮, 请调用 moveTo btn 方法, 在视频起始处跳转到新的位置。

We have gone through a long way in this tutorial, now let's build and run the project, connect the demo application to your Mavic Pro (Please check Run Application for more details) and check all the features we have implemented so far.
在这个教程中, 我们已经学到了了很多, 现在让我们构建和运行这个项目, 将演示APP连接到您的 Mavic Pro (请检查运行APP更多的细节) , 并检查我们已经实现的所有功能。

If everything goes well, you should see something similar to the following gif animations like this:
如果一切顺利, 你应该看到类似于下面这些 gif 动画的东西:

![](https://devcn.djicdn.com/images/tutorials-and-samples/Android/MediaManagerDemo/videoPlayback-301857f429.gif)

**Summary**
**摘要**

In this tutorial, you have learned how to use MediaManager to preview photos, play videos, download or delete files, you also learn how to get and show the video playback status info. By using the MediaManager, the users can get the metadata for all the multimedia files, and has access to each individual multimedia file. Hope you enjoy it!
在本教程中, 您已经学会了如何使用 MediaManager 来预览照片, 播放视频, 下载或删除文件, 你还学习如何获取和显示视频播放状态信息。 通过 MediaManager, 用户可以获得所有多媒体文件的元数据, 并且可以访问每个多媒体文件。 希望你喜欢！


如果您觉得文档翻译有不妥，欢迎到Github上发起push请求，
如果你觉得本文档对您有帮助，可以通过赞赏来帮助我持续维护文档
也可以扫描下面的二维码加我微信拉您进DJI Mobile SDK 开发者群 探讨DJI SDK开发相关问题
![](images/20180303_092058.jpg)